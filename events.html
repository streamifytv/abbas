<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title></title>
	
	<style>
		/* Your existing CSS styles remain unchanged */
		body {
			margin: 0 !important;
		}
		/* ... (keep all your existing styles) ... */
	</style>
</head>
<body>
    <div>        
        <div class="video-wrapper">
            <div id="video"></div>    
        </div>
    </div>

    <script src="https://ssl.p.jwpcdn.com/player/v/8.22.0/jwplayer.js"></script>
    <script src="https://ssl.p.jwpcdn.com/player/v/8.22.0/provider.hlsjs.js"></script>
    <script src="https://ssl.p.jwpcdn.com/player/v/8.22.0/provider.cast.js"></script>
    <script>jwplayer.key = "eNFaXCjyURVoCCGiHp7HTQ3hDhE/AfL0g8VE1fRbL84=";</script>
    <script type="text/javascript">

    // Function to get URL parameter
    function getUrlParameter(name) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(window.location.href);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    // Base URL
    const baseUrl = "https://wasitv-pro.site/abbas/?c=";
    
    // Get the channel parameter from URL or use default
    var channelParam = getUrlParameter('channel');
    var channel = channelParam || "willowuse"; // default channel
    var link = baseUrl + channel;
    var type = "hls";
    var player = jwplayer("video");

    window.addEventListener("message", function(n) {
        try {
            const i = JSON.parse(n.data);
            if (i.event == "banner-on-player" && $(".jw-wrapper").append('<div class="banner-on-player">' + i.data.html + "<\/div>"), i.event == "logo-on-player") {
                var t = document.getElementsByClassName("jw-wrapper");
                t.length > 0 && (t[0].innerHTML += i.data.html)
            }
            i.event == "click-player" && player != undefined && (jwplayer().getState() != "playing" ? player.play() : player.pause());
            i.event == "player-unmute" && player != undefined && player.getMute() === !0 && (player.setMute(!1), setTimeout(() => {
                player.getState() != "playing" && player.play()
            }, 500))
        } catch (i) {}
    }, !1);

    window.addEventListener("load", function() {
        player.setup({
            contextmenu: !1,
            autostart: !0,
            allowFullscreen: !0,
            width: "100%",
            height: "100vh",
            aspectratio: "16:9",
            playlist: [{
                sources: [{
                    file: link,
                    type: type
                }]
            }]
        });
        player.on("ready", function() {
            player.setMute(!1);
            player.getMute() === !0 && type !== "youtube" && sendEventToParent("player-is-muted", !0);
            sendEventToParent("player-ready", {})
        });
        player.on("mute", function() {
            player.getMute() === !0 ? sendEventToParent("player-is-muted", !0) : sendEventToParent("player-is-unmute", !0)
        });
        player.on("error", function() {
            sendEventToParent("next-server", !0)
        });
        player.on("complete", function() {
            sendEventToParent("next-server", !0)
        })
    });

    function sendEventToParent(n, t) {
        parent && parent.postMessage(JSON.stringify({
            event: n,
            data: t
        }), "*")
    }

    document.addEventListener("contextmenu", function(n) {
        n.preventDefault()
    })
    </script>
</html>